<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://lainbo.github.io/</id>
    <title>Lainbo</title>
    <updated>2019-12-18T13:21:11.818Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://lainbo.github.io/"/>
    <link rel="self" href="https://lainbo.github.io//atom.xml"/>
    <subtitle>æ¸©æ•…è€ŒçŸ¥æ–°</subtitle>
    <logo>https://lainbo.github.io//images/avatar.png</logo>
    <icon>https://lainbo.github.io//favicon.ico</icon>
    <rights>All rights reserved 2019, Lainbo</rights>
    <entry>
        <title type="html"><![CDATA[æµå¼å¸ƒå±€]]></title>
        <id>https://lainbo.github.io//post/liu-shi-bu-ju</id>
        <link href="https://lainbo.github.io//post/liu-shi-bu-ju">
        </link>
        <updated>2019-11-29T11:58:14.000Z</updated>
        <content type="html"><![CDATA[<h1 id="ç§»åŠ¨webå¼€å‘æµå¼å¸ƒå±€">ç§»åŠ¨webå¼€å‘æµå¼å¸ƒå±€</h1>
<h3 id="10-ç§»åŠ¨ç«¯åŸºç¡€">1.0 ç§»åŠ¨ç«¯åŸºç¡€</h3>
<h4 id="11æµè§ˆå™¨ç°çŠ¶">1.1æµè§ˆå™¨ç°çŠ¶</h4>
<p>PCç«¯å¸¸è§æµè§ˆå™¨ï¼š360æµè§ˆå™¨ã€è°·æ­Œæµè§ˆå™¨ã€ç«ç‹æµè§ˆå™¨ã€QQæµè§ˆå™¨ã€ç™¾åº¦æµè§ˆå™¨ã€æœç‹—æµè§ˆå™¨ã€IEæµè§ˆå™¨ã€‚</p>
<p>ç§»åŠ¨ç«¯å¸¸è§æµè§ˆå™¨ï¼šUCæµè§ˆå™¨ï¼ŒQQæµè§ˆå™¨ï¼Œæ¬§æœ‹æµè§ˆå™¨ï¼Œç™¾åº¦æ‰‹æœºæµè§ˆå™¨ï¼Œ360å®‰å…¨æµè§ˆå™¨ï¼Œè°·æ­Œæµè§ˆå™¨ï¼Œæœç‹—æ‰‹æœºæµè§ˆå™¨ï¼ŒçŒè±¹æµè§ˆå™¨ï¼Œä»¥åŠå…¶ä»–æ‚ç‰Œæµè§ˆå™¨ã€‚</p>
<p>å›½å†…çš„UCå’ŒQQï¼Œç™¾åº¦ç­‰æ‰‹æœºæµè§ˆå™¨éƒ½æ˜¯æ ¹æ®Webkitä¿®æ”¹è¿‡æ¥çš„å†…æ ¸ï¼Œå›½å†…å°šæ— è‡ªä¸»ç ”å‘çš„å†…æ ¸ï¼Œå°±åƒå›½å†…çš„æ‰‹æœºæ“ä½œç³»ç»Ÿéƒ½æ˜¯åŸºäºAndroidä¿®æ”¹å¼€å‘çš„ä¸€æ ·ã€‚</p>
<p><strong>æ€»ç»“ï¼šå…¼å®¹ç§»åŠ¨ç«¯ä¸»æµæµè§ˆå™¨ï¼Œå¤„ç†Webkitå†…æ ¸æµè§ˆå™¨å³å¯ã€‚</strong></p>
<h4 id="12-æ‰‹æœºå±å¹•çš„ç°çŠ¶">1.2 æ‰‹æœºå±å¹•çš„ç°çŠ¶</h4>
<ul>
<li>ç§»åŠ¨ç«¯è®¾å¤‡å±å¹•å°ºå¯¸éå¸¸å¤šï¼Œç¢ç‰‡åŒ–ä¸¥é‡ã€‚</li>
<li>Androidè®¾å¤‡æœ‰å¤šç§åˆ†è¾¨ç‡ï¼š480x800, 480x854, 540x960, 720x1280ï¼Œ1080x1920ç­‰ï¼Œè¿˜æœ‰ä¼ è¯´ä¸­çš„2Kï¼Œ4kå±ã€‚</li>
<li>è¿‘å¹´æ¥iPhoneçš„ç¢ç‰‡åŒ–ä¹ŸåŠ å‰§äº†ï¼Œå…¶è®¾å¤‡çš„ä¸»è¦åˆ†è¾¨ç‡æœ‰ï¼š640x960, 640x1136, 750x1334, 1242x2208ç­‰ã€‚</li>
<li>ä½œä¸ºå¼€å‘è€…æ— éœ€å…³æ³¨è¿™äº›åˆ†è¾¨ç‡ï¼Œå› ä¸ºæˆ‘ä»¬å¸¸ç”¨çš„å°ºå¯¸å•ä½æ˜¯ px ã€‚</li>
</ul>
<h4 id="13å¸¸è§ç§»åŠ¨ç«¯å±å¹•å°ºå¯¸">1.3å¸¸è§ç§»åŠ¨ç«¯å±å¹•å°ºå¯¸</h4>
<img src="images/1.png">
<h4 id="14ç§»åŠ¨ç«¯è°ƒè¯•æ–¹æ³•">1.4ç§»åŠ¨ç«¯è°ƒè¯•æ–¹æ³•</h4>
<ul>
<li>Chrome DevToolsï¼ˆè°·æ­Œæµè§ˆå™¨ï¼‰çš„æ¨¡æ‹Ÿæ‰‹æœºè°ƒè¯•</li>
<li>æ­å»ºæœ¬åœ°webæœåŠ¡å™¨ï¼Œæ‰‹æœºå’ŒæœåŠ¡å™¨ä¸€ä¸ªå±€åŸŸç½‘å†…ï¼Œé€šè¿‡æ‰‹æœºè®¿é—®æœåŠ¡å™¨</li>
<li>ä½¿ç”¨å¤–ç½‘æœåŠ¡å™¨ï¼Œç›´æ¥IPæˆ–åŸŸåè®¿é—®</li>
</ul>
<h3 id="20-è§†å£">2.0 è§†å£</h3>
<p>è§†å£ï¼ˆviewportï¼‰å°±æ˜¯æµè§ˆå™¨æ˜¾ç¤ºé¡µé¢å†…å®¹çš„å±å¹•åŒºåŸŸã€‚ è§†å£å¯ä»¥åˆ†ä¸ºå¸ƒå±€è§†å£ã€è§†è§‰è§†å£å’Œç†æƒ³è§†å£</p>
<h4 id="21-å¸ƒå±€è§†å£-layout-viewport">2.1 å¸ƒå±€è§†å£ layout viewport</h4>
<p>ä¸€èˆ¬ç§»åŠ¨è®¾å¤‡çš„æµè§ˆå™¨éƒ½é»˜è®¤è®¾ç½®äº†ä¸€ä¸ªå¸ƒå±€è§†å£ï¼Œç”¨äºè§£å†³æ—©æœŸçš„PCç«¯é¡µé¢åœ¨æ‰‹æœºä¸Šæ˜¾ç¤ºçš„é—®é¢˜ã€‚</p>
<p>iOS, AndroidåŸºæœ¬éƒ½å°†è¿™ä¸ªè§†å£åˆ†è¾¨ç‡è®¾ç½®ä¸º 980pxï¼Œæ‰€ä»¥PCä¸Šçš„ç½‘é¡µå¤§å¤šéƒ½èƒ½åœ¨æ‰‹æœºä¸Šå‘ˆç°ï¼Œåªä¸è¿‡å…ƒç´ çœ‹ä¸Šå»å¾ˆå°ï¼Œä¸€èˆ¬é»˜è®¤å¯ä»¥é€šè¿‡æ‰‹åŠ¨ç¼©æ”¾ç½‘é¡µã€‚</p>
<img src="./images/2.png">
<p>####2.2è§†è§‰è§†å£ visual viewport</p>
<p>å­—é¢æ„æ€ï¼Œå®ƒæ˜¯ç”¨æˆ·æ­£åœ¨çœ‹åˆ°çš„ç½‘ç«™çš„åŒºåŸŸã€‚æ³¨æ„ï¼šæ˜¯ç½‘ç«™çš„åŒºåŸŸã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ç¼©æ”¾å»æ“ä½œè§†è§‰è§†å£ï¼Œä½†ä¸ä¼šå½±å“å¸ƒå±€è§†å£ï¼Œå¸ƒå±€è§†å£ä»ä¿æŒåŸæ¥çš„å®½åº¦ã€‚</p>
<img src="./images/3.png">
<h4 id="23ç†æƒ³è§†å£-ideal-viewport">2.3ç†æƒ³è§†å£ ideal viewport</h4>
<p>ä¸ºäº†ä½¿ç½‘ç«™åœ¨ç§»åŠ¨ç«¯æœ‰æœ€ç†æƒ³çš„æµè§ˆå’Œé˜…è¯»å®½åº¦è€Œè®¾å®š</p>
<p>ç†æƒ³è§†å£ï¼Œå¯¹è®¾å¤‡æ¥è®²ï¼Œæ˜¯æœ€ç†æƒ³çš„è§†å£å°ºå¯¸</p>
<p>éœ€è¦æ‰‹åŠ¨æ·»å†™metaè§†å£æ ‡ç­¾é€šçŸ¥æµè§ˆå™¨æ“ä½œ</p>
<p>metaè§†å£æ ‡ç­¾çš„ä¸»è¦ç›®çš„ï¼šå¸ƒå±€è§†å£çš„å®½åº¦åº”è¯¥ä¸ç†æƒ³è§†å£çš„å®½åº¦ä¸€è‡´ï¼Œç®€å•ç†è§£å°±æ˜¯è®¾å¤‡æœ‰å¤šå®½ï¼Œæˆ‘ä»¬å¸ƒå±€çš„è§†å£å°±å¤šå®½</p>
<p><strong>æ€»ç»“ï¼šæˆ‘ä»¬å¼€å‘æœ€ç»ˆä¼šç”¨ç†æƒ³è§†å£ï¼Œè€Œç†æƒ³è§†å£å°±æ˜¯å°†å¸ƒå±€è§†å£çš„å®½åº¦ä¿®æ”¹ä¸ºè§†è§‰è§†å£</strong></p>
<h4 id="24metaæ ‡ç­¾">2.4metaæ ‡ç­¾</h4>
<img src="./images/4.png">
<p>æœ€æ ‡å‡†çš„viewportè®¾ç½®</p>
<ul>
<li>è§†å£å®½åº¦å’Œè®¾å¤‡ä¿æŒä¸€è‡´</li>
<li>è§†å£çš„é»˜è®¤ç¼©æ”¾æ¯”ä¾‹1.0</li>
<li>ä¸å…è®¸ç”¨æˆ·è‡ªè¡Œç¼©æ”¾</li>
<li>æœ€å¤§å…è®¸çš„ç¼©æ”¾æ¯”ä¾‹1.0</li>
<li>æœ€å°å…è®¸çš„ç¼©æ”¾æ¯”ä¾‹1.0</li>
</ul>
<h3 id="30äºŒå€å›¾">3.0äºŒå€å›¾</h3>
<p>####3.1ç‰©ç†åƒç´ &amp;ç‰©ç†åƒç´ æ¯”</p>
<p>ç‰©ç†åƒç´ ç‚¹æŒ‡çš„æ˜¯å±å¹•æ˜¾ç¤ºçš„æœ€å°é¢—ç²’ï¼Œæ˜¯ç‰©ç†çœŸå®å­˜åœ¨çš„ã€‚è¿™æ˜¯å‚å•†åœ¨å‡ºå‚æ—¶å°±è®¾ç½®å¥½äº†,æ¯”å¦‚è‹¹æœ6 æ˜¯  750* 1334</p>
<p>æˆ‘ä»¬å¼€å‘æ—¶å€™çš„1px ä¸æ˜¯ä¸€å®šç­‰äº1ä¸ªç‰©ç†åƒç´ çš„</p>
<p>ä¸€ä¸ªpxçš„èƒ½æ˜¾ç¤ºçš„ç‰©ç†åƒç´ ç‚¹çš„ä¸ªæ•°ï¼Œç§°ä¸ºç‰©ç†åƒç´ æ¯”æˆ–å±å¹•åƒç´ æ¯”</p>
<p>å¦‚æœæŠŠ1å¼ 100*100çš„å›¾ç‰‡æ”¾åˆ°æ‰‹æœºé‡Œé¢ä¼šæŒ‰ç…§ç‰©ç†åƒç´ æ¯”ç»™æˆ‘ä»¬ç¼©æ”¾</p>
<p>lRetinaï¼ˆè§†ç½‘è†œå±å¹•ï¼‰æ˜¯ä¸€ç§æ˜¾ç¤ºæŠ€æœ¯ï¼Œå¯ä»¥å°†æŠŠæ›´å¤šçš„ç‰©ç†åƒç´ ç‚¹å‹ç¼©è‡³ä¸€å—å±å¹•é‡Œï¼Œä»è€Œè¾¾åˆ°æ›´é«˜çš„åˆ†è¾¨ç‡ï¼Œå¹¶æé«˜å±å¹•æ˜¾ç¤ºçš„ç»†è…»ç¨‹åº¦ã€‚</p>
<p>å¯¹äºä¸€å¼  50px * 50px çš„å›¾ç‰‡,åœ¨æ‰‹æœºæˆ– Retina å±ä¸­æ‰“å¼€ï¼ŒæŒ‰ç…§åˆšæ‰çš„ç‰©ç†åƒç´ æ¯”ä¼šæ”¾å¤§å€æ•°ï¼Œè¿™æ ·ä¼šé€ æˆå›¾ç‰‡æ¨¡ç³Š</p>
<p>åœ¨æ ‡å‡†çš„viewportè®¾ç½®ä¸­ï¼Œä½¿ç”¨å€å›¾æ¥æé«˜å›¾ç‰‡è´¨é‡ï¼Œè§£å†³åœ¨é«˜æ¸…è®¾å¤‡ä¸­çš„æ¨¡ç³Šé—®é¢˜</p>
<p>é€šå¸¸ä½¿ç”¨äºŒå€å›¾ï¼Œ å› ä¸ºiPhone 6 çš„å½±å“èƒŒæ™¯å›¾ç‰‡ æ³¨æ„ç¼©æ”¾é—®é¢˜</p>
<h4 id="32èƒŒæ™¯ç¼©æ”¾background-size">3.2èƒŒæ™¯ç¼©æ”¾background-size</h4>
<p>background-size å±æ€§è§„å®šèƒŒæ™¯å›¾åƒçš„å°ºå¯¸</p>
<pre><code>background-size: èƒŒæ™¯å›¾ç‰‡å®½åº¦ èƒŒæ™¯å›¾ç‰‡é«˜åº¦;
</code></pre>
<p>å•ä½ï¼š é•¿åº¦|ç™¾åˆ†æ¯”|cover|contain;</p>
<p>coveræŠŠèƒŒæ™¯å›¾åƒæ‰©å±•è‡³è¶³å¤Ÿå¤§ï¼Œä»¥ä½¿èƒŒæ™¯å›¾åƒå®Œå…¨è¦†ç›–èƒŒæ™¯åŒºåŸŸã€‚</p>
<p>containæŠŠå›¾åƒå›¾åƒæ‰©å±•è‡³æœ€å¤§å°ºå¯¸ï¼Œä»¥ä½¿å…¶å®½åº¦å’Œé«˜åº¦å®Œå…¨é€‚åº”å†…å®¹åŒºåŸŸ</p>
<h3 id="40-ç§»åŠ¨å¼€å‘é€‰æ‹©å’ŒæŠ€æœ¯è§£å†³æ–¹æ¡ˆ">4.0 ç§»åŠ¨å¼€å‘é€‰æ‹©å’ŒæŠ€æœ¯è§£å†³æ–¹æ¡ˆ</h3>
<p>####4.1ç§»åŠ¨ç«¯ä¸»æµæ–¹æ¡ˆ</p>
<p>1.å•ç‹¬åˆ¶ä½œç§»åŠ¨ç«¯é¡µé¢ï¼ˆä¸»æµï¼‰</p>
<p>é€šå¸¸æƒ…å†µä¸‹ï¼Œç½‘å€åŸŸåå‰é¢åŠ  m(mobile)<br>
å¯ä»¥æ‰“å¼€ç§»åŠ¨ç«¯ã€‚é€šè¿‡åˆ¤æ–­è®¾å¤‡ï¼Œå¦‚æœæ˜¯ç§»åŠ¨è®¾å¤‡æ‰“å¼€ï¼Œåˆ™è·³åˆ°ç§»åŠ¨ç«¯é¡µé¢ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼ŒPCç«¯å’Œç§»åŠ¨ç«¯ä¸ºä¸¤å¥—ç½‘ç«™ï¼Œpcç«¯æ˜¯pcæ–­çš„æ ·å¼ï¼Œç§»åŠ¨ç«¯åœ¨å†™ä¸€å¥—ï¼Œä¸“é—¨é’ˆå¯¹ç§»åŠ¨ç«¯é€‚é…çš„ä¸€å¥—ç½‘ç«™</p>
<p>äº¬ä¸œpcç«¯ï¼š</p>
<img src="./images/5.png">
<p>äº¬ä¸œç§»åŠ¨ç«¯ï¼š</p>
<img src="./images/6.jpg">
<p>2.å“åº”å¼é¡µé¢å…¼å®¹ç§»åŠ¨ç«¯ï¼ˆå…¶æ¬¡ï¼‰</p>
<img src="./images/7.jpg">
<p>å“åº”å¼ç½‘ç«™ï¼šå³pcå’Œç§»åŠ¨ç«¯å…±ç”¨ä¸€å¥—ç½‘ç«™ï¼Œåªä¸è¿‡åœ¨ä¸åŒå±å¹•ä¸‹ï¼Œæ ·å¼ä¼šè‡ªåŠ¨é€‚é…</p>
<h4 id="42-ç§»åŠ¨ç«¯æŠ€æœ¯è§£å†³æ–¹æ¡ˆ">4.2 ç§»åŠ¨ç«¯æŠ€æœ¯è§£å†³æ–¹æ¡ˆ</h4>
<p>1.ç§»åŠ¨ç«¯æµè§ˆå™¨å…¼å®¹é—®é¢˜</p>
<p>ç§»åŠ¨ç«¯æµè§ˆå™¨åŸºæœ¬ä»¥ webkit å†…æ ¸ä¸ºä¸»ï¼Œå› æ­¤æˆ‘ä»¬å°±è€ƒè™‘webkitå…¼å®¹æ€§é—®é¢˜ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥æ”¾å¿ƒä½¿ç”¨ H5 æ ‡ç­¾å’Œ CSS3 æ ·å¼ã€‚</p>
<p>åŒæ—¶æˆ‘ä»¬æµè§ˆå™¨çš„ç§æœ‰å‰ç¼€æˆ‘ä»¬åªéœ€è¦è€ƒè™‘æ·»åŠ  webkit å³å¯</p>
<p>2.ç§»åŠ¨ç«¯å…¬å…±æ ·å¼</p>
<p>ç§»åŠ¨ç«¯ CSS åˆå§‹åŒ–æ¨èä½¿ç”¨ normalize.css/</p>
<p>Normalize.cssï¼šä¿æŠ¤äº†æœ‰ä»·å€¼çš„é»˜è®¤å€¼</p>
<p>Normalize.cssï¼šä¿®å¤äº†æµè§ˆå™¨çš„bug</p>
<p>Normalize.cssï¼šæ˜¯æ¨¡å—åŒ–çš„</p>
<p>Normalize.cssï¼šæ‹¥æœ‰è¯¦ç»†çš„æ–‡æ¡£</p>
<p>å®˜ç½‘åœ°å€ï¼š <a href="http://necolas.github.io/normalize.css/">http://necolas.github.io/normalize.css/</a></p>
<h4 id="43-ç§»åŠ¨ç«¯å¤§é‡ä½¿ç”¨-css3ç›’å­æ¨¡å‹box-sizin">4.3 ç§»åŠ¨ç«¯å¤§é‡ä½¿ç”¨ CSS3ç›’å­æ¨¡å‹box-sizin</h4>
<p>ä¼ ç»Ÿæ¨¡å¼å®½åº¦è®¡ç®—ï¼šç›’å­çš„å®½åº¦ = CSSä¸­è®¾ç½®çš„width + border + padding</p>
<p>CSS3ç›’å­æ¨¡å‹ï¼š     ç›’å­çš„å®½åº¦=  CSSä¸­è®¾ç½®çš„å®½åº¦width é‡Œé¢åŒ…å«äº† border å’Œ padding</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬çš„CSS3ä¸­çš„ç›’å­æ¨¡å‹ï¼Œ padding å’Œ border ä¸ä¼šæ’‘å¤§ç›’å­äº†</p>
<pre><code>/*CSS3ç›’å­æ¨¡å‹*/
box-sizing: border-box;
/*ä¼ ç»Ÿç›’å­æ¨¡å‹*/
box-sizing: content-box;

</code></pre>
<p>ç§»åŠ¨ç«¯å¯ä»¥å…¨éƒ¨CSS3 ç›’å­æ¨¡å‹</p>
<p>PCç«¯å¦‚æœå®Œå…¨éœ€è¦å…¼å®¹ï¼Œæˆ‘ä»¬å°±ç”¨ä¼ ç»Ÿæ¨¡å¼ï¼Œå¦‚æœä¸è€ƒè™‘å…¼å®¹æ€§ï¼Œæˆ‘ä»¬å°±é€‰æ‹© CSS3 ç›’å­æ¨¡å‹</p>
<h4 id="44ç§»åŠ¨ç«¯ç‰¹æ®Šæ ·å¼">4.4ç§»åŠ¨ç«¯ç‰¹æ®Šæ ·å¼</h4>
<pre><code>    /*CSS3ç›’å­æ¨¡å‹*/
    box-sizing: border-box;
    -webkit-box-sizing: border-box;
    /*ç‚¹å‡»é«˜äº®æˆ‘ä»¬éœ€è¦æ¸…é™¤æ¸…é™¤  è®¾ç½®ä¸ºtransparent å®Œæˆé€æ˜*/
    -webkit-tap-highlight-color: transparent;
    /*åœ¨ç§»åŠ¨ç«¯æµè§ˆå™¨é»˜è®¤çš„å¤–è§‚åœ¨iOSä¸ŠåŠ ä¸Šè¿™ä¸ªå±æ€§æ‰èƒ½ç»™æŒ‰é’®å’Œè¾“å…¥æ¡†è‡ªå®šä¹‰æ ·å¼*/
    -webkit-appearance: none;
    /*ç¦ç”¨é•¿æŒ‰é¡µé¢æ—¶çš„å¼¹å‡ºèœå•*/
    img,a { -webkit-touch-callout: none; }

</code></pre>
<h3 id="50ç§»åŠ¨ç«¯å¸¸è§å¸ƒå±€">5.0ç§»åŠ¨ç«¯å¸¸è§å¸ƒå±€</h3>
<p>ç§»åŠ¨ç«¯å•ç‹¬åˆ¶ä½œ</p>
<ul>
<li>æµå¼å¸ƒå±€ï¼ˆç™¾åˆ†æ¯”å¸ƒå±€ï¼‰</li>
<li>flex å¼¹æ€§å¸ƒå±€ï¼ˆå¼ºçƒˆæ¨èï¼‰</li>
<li>less+rem+åª’ä½“æŸ¥è¯¢å¸ƒå±€</li>
<li>æ··åˆå¸ƒå±€</li>
</ul>
<p>å“åº”å¼</p>
<ul>
<li>åª’ä½“æŸ¥è¯¢</li>
<li>bootstarp</li>
</ul>
<p>æµå¼å¸ƒå±€ï¼š</p>
<p>æµå¼å¸ƒå±€ï¼Œå°±æ˜¯ç™¾åˆ†æ¯”å¸ƒå±€ï¼Œä¹Ÿç§°éå›ºå®šåƒç´ å¸ƒå±€ã€‚</p>
<p>é€šè¿‡ç›’å­çš„å®½åº¦è®¾ç½®æˆç™¾åˆ†æ¯”æ¥æ ¹æ®å±å¹•çš„å®½åº¦æ¥è¿›è¡Œä¼¸ç¼©ï¼Œä¸å—å›ºå®šåƒç´ çš„é™åˆ¶ï¼Œå†…å®¹å‘ä¸¤ä¾§å¡«å……ã€‚</p>
<p>æµå¼å¸ƒå±€æ–¹å¼æ˜¯ç§»åŠ¨webå¼€å‘ä½¿ç”¨çš„æ¯”è¾ƒå¸¸è§çš„å¸ƒå±€æ–¹å¼ã€‚</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[è¯·æ±‚ã€å¼‚æ­¥]]></title>
        <id>https://lainbo.github.io//post/qing-qiu-yi-bu</id>
        <link href="https://lainbo.github.io//post/qing-qiu-yi-bu">
        </link>
        <updated>2019-11-29T02:32:09.000Z</updated>
        <content type="html"><![CDATA[<h3 id="æ¥å£è°ƒç”¨æ–¹å¼">æ¥å£è°ƒç”¨æ–¹å¼</h3>
<ul>
<li>åŸç”Ÿajax</li>
<li>åŸºäºjQueryçš„ajax</li>
<li>fetch</li>
<li>axios</li>
</ul>
<h3 id="å¼‚æ­¥">å¼‚æ­¥</h3>
<ul>
<li>JavaScriptçš„æ‰§è¡Œç¯å¢ƒæ˜¯ã€Œå•çº¿ç¨‹ã€</li>
<li>æ‰€è°“å•çº¿ç¨‹ï¼Œæ˜¯æŒ‡JSå¼•æ“ä¸­è´Ÿè´£è§£é‡Šå’Œæ‰§è¡ŒJavaScriptä»£ç çš„çº¿ç¨‹åªæœ‰ä¸€ä¸ªï¼Œä¹Ÿå°±æ˜¯ä¸€æ¬¡åªèƒ½å®Œæˆä¸€é¡¹ä»»åŠ¡ï¼Œè¿™ä¸ªä»»åŠ¡æ‰§è¡Œå®Œåæ‰èƒ½æ‰§è¡Œä¸‹ä¸€ä¸ªï¼Œå®ƒä¼šã€Œé˜»å¡ã€å…¶ä»–ä»»åŠ¡ã€‚è¿™ä¸ªä»»åŠ¡å¯ç§°ä¸ºä¸»çº¿ç¨‹</li>
<li>å¼‚æ­¥æ¨¡å¼å¯ä»¥ä¸€èµ·æ‰§è¡Œ<strong>å¤šä¸ªä»»åŠ¡</strong></li>
<li>JSä¸­å¸¸è§çš„å¼‚æ­¥è°ƒç”¨
<ul>
<li>å®šæ—¶ä»»ä½•</li>
<li>ajax</li>
<li>äº‹ä»¶å‡½æ•°</li>
</ul>
</li>
</ul>
<h3 id="promise">promise</h3>
<ul>
<li>ä¸»è¦è§£å†³å¼‚æ­¥æ·±å±‚åµŒå¥—çš„é—®é¢˜</li>
<li>promise æä¾›äº†ç®€æ´çš„API  ä½¿å¾—å¼‚æ­¥æ“ä½œæ›´åŠ å®¹æ˜“</li>
</ul>
<pre><code class="language-html"> 
  &lt;script type=&quot;text/javascript&quot;&gt;
    /*
     1. PromiseåŸºæœ¬ä½¿ç”¨
           æˆ‘ä»¬ä½¿ç”¨newæ¥æ„å»ºä¸€ä¸ªPromise  Promiseçš„æ„é€ å‡½æ•°æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œæ˜¯å‡½æ•°ï¼Œå¹¶ä¸”ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼š		   resolveï¼Œrejectï¼Œ åˆ†åˆ«è¡¨ç¤ºå¼‚æ­¥æ“ä½œæ‰§è¡ŒæˆåŠŸåçš„å›è°ƒå‡½æ•°å’Œå¼‚æ­¥æ“ä½œæ‰§è¡Œå¤±è´¥åçš„å›è°ƒå‡½æ•°
    */


    var p = new Promise(function(resolve, reject){
      //2. è¿™é‡Œç”¨äºå®ç°å¼‚æ­¥ä»»åŠ¡  setTimeout
      setTimeout(function(){
        var flag = false;
        if(flag) {
          //3. æ­£å¸¸æƒ…å†µ
          resolve('hello');
        }else{
          //4. å¼‚å¸¸æƒ…å†µ
          reject('å‡ºé”™äº†');
        }
      }, 100);
    });
    //  5 Promiseå®ä¾‹ç”Ÿæˆä»¥åï¼Œå¯ä»¥ç”¨thenæ–¹æ³•æŒ‡å®šresolvedçŠ¶æ€å’ŒrejectçŠ¶æ€çš„å›è°ƒå‡½æ•° 
    //  åœ¨thenæ–¹æ³•ä¸­ï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥returnæ•°æ®è€Œä¸æ˜¯Promiseå¯¹è±¡ï¼Œåœ¨åé¢çš„thenä¸­å°±å¯ä»¥æ¥æ”¶åˆ°æ•°æ®äº†  
    p.then(function(data){
      console.log(data)
    },function(info){
      console.log(info)
    });
  &lt;/script&gt;
</code></pre>
<h3 id="åŸºäºpromiseå‘é€ajaxè¯·æ±‚">åŸºäºPromiseå‘é€Ajaxè¯·æ±‚</h3>
<pre><code class="language-html"> 
  &lt;script type=&quot;text/javascript&quot;&gt;
    /*
      åŸºäºPromiseå‘é€Ajaxè¯·æ±‚
    */
    function queryData(url) {
     #   1.1 åˆ›å»ºä¸€ä¸ªPromiseå®ä¾‹
      var p = new Promise(function(resolve, reject){
        var xhr = new XMLHttpRequest();
        xhr.onreadystatechange = function(){
          if(xhr.readyState != 4) return;
          if(xhr.readyState == 4 &amp;&amp; xhr.status == 200) {
            # 1.2 å¤„ç†æ­£å¸¸çš„æƒ…å†µ
            resolve(xhr.responseText);
          }else{
            # 1.3 å¤„ç†å¼‚å¸¸æƒ…å†µ
            reject('æœåŠ¡å™¨é”™è¯¯');
          }
        };
        xhr.open('get', url);
        xhr.send(null);
      });
      return p;
    }
	# æ³¨æ„ï¼š  è¿™é‡Œéœ€è¦å¼€å¯ä¸€ä¸ªæœåŠ¡ 
    # åœ¨thenæ–¹æ³•ä¸­ï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥returnæ•°æ®è€Œä¸æ˜¯Promiseå¯¹è±¡ï¼Œåœ¨åé¢çš„thenä¸­å°±å¯ä»¥æ¥æ”¶åˆ°æ•°æ®äº†
    queryData('http://localhost:3000/data')
      .then(function(data){
        console.log(data)
        #  1.4 æƒ³è¦ç»§ç»­é“¾å¼ç¼–ç¨‹ä¸‹å» éœ€è¦ return  
        return queryData('http://localhost:3000/data1');
      })
      .then(function(data){
        console.log(data);
        return queryData('http://localhost:3000/data2');
      })
      .then(function(data){
        console.log(data)
      });
  &lt;/script&gt;
</code></pre>
<h3 id="promise-åŸºæœ¬api">Promise  åŸºæœ¬API</h3>
<h4 id="å®ä¾‹æ–¹æ³•">å®ä¾‹æ–¹æ³•</h4>
<h5 id="then">.then()</h5>
<ul>
<li>å¾—åˆ°å¼‚æ­¥ä»»åŠ¡æ­£ç¡®çš„ç»“æœ</li>
</ul>
<h5 id="catch">.catch()</h5>
<ul>
<li>è·å–å¼‚å¸¸ä¿¡æ¯</li>
</ul>
<h5 id="finally">.finally()</h5>
<ul>
<li>æˆåŠŸä¸å¦éƒ½ä¼šæ‰§è¡Œï¼ˆä¸æ˜¯æ­£å¼æ ‡å‡†ï¼‰</li>
</ul>
<pre><code class="language-html">  
  &lt;script type=&quot;text/javascript&quot;&gt;
    /*
      Promiseå¸¸ç”¨API-å®ä¾‹æ–¹æ³•
    */
    // console.dir(Promise);
    function foo() {
      return new Promise(function(resolve, reject){
        setTimeout(function(){
          // resolve(123);
          reject('error');
        }, 100);
      })
    }
    // foo()
    //   .then(function(data){
    //     console.log(data)
    //   })
    //   .catch(function(data){
    //     console.log(data)
    //   })
    //   .finally(function(){
    //     console.log('finished')
    //   });

    // --------------------------
    // ä¸¤ç§å†™æ³•æ˜¯ç­‰æ•ˆçš„
    foo()
      .then(function(data){
        # å¾—åˆ°å¼‚æ­¥ä»»åŠ¡æ­£ç¡®çš„ç»“æœ
        console.log(data)
      },function(data){
        # è·å–å¼‚å¸¸ä¿¡æ¯
        console.log(data)
      })
      # æˆåŠŸä¸å¦éƒ½ä¼šæ‰§è¡Œï¼ˆä¸æ˜¯æ­£å¼æ ‡å‡†ï¼‰ 
      .finally(function(){
        console.log('finished')
      });
  &lt;/script&gt;
</code></pre>
<h4 id="é™æ€æ–¹æ³•">é™æ€æ–¹æ³•</h4>
<h5 id="all">.all()</h5>
<ul>
<li><code>Promise.all</code>æ–¹æ³•æ¥å—ä¸€ä¸ªæ•°ç»„ä½œå‚æ•°ï¼Œæ•°ç»„ä¸­çš„å¯¹è±¡ï¼ˆp1ã€p2ã€p3ï¼‰å‡ä¸ºpromiseå®ä¾‹ï¼ˆå¦‚æœä¸æ˜¯ä¸€ä¸ªpromiseï¼Œè¯¥é¡¹ä¼šè¢«ç”¨<code>Promise.resolve</code>è½¬æ¢ä¸ºä¸€ä¸ªpromise)ã€‚å®ƒçš„çŠ¶æ€ç”±è¿™ä¸‰ä¸ªpromiseå®ä¾‹å†³å®š</li>
</ul>
<h5 id="race">.race()</h5>
<ul>
<li><code>Promise.race</code>æ–¹æ³•åŒæ ·æ¥å—ä¸€ä¸ªæ•°ç»„ä½œå‚æ•°ã€‚å½“p1, p2, p3ä¸­æœ‰ä¸€ä¸ªå®ä¾‹çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜ï¼ˆå˜ä¸º<code>fulfilled</code>æˆ–<code>rejected</code>ï¼‰ï¼Œpçš„çŠ¶æ€å°±è·Ÿç€æ”¹å˜ã€‚å¹¶æŠŠç¬¬ä¸€ä¸ªæ”¹å˜çŠ¶æ€çš„promiseçš„è¿”å›å€¼ï¼Œä¼ ç»™pçš„å›è°ƒå‡½æ•°</li>
</ul>
<p>â€‹</p>
<pre><code class="language-html">  &lt;script type=&quot;text/javascript&quot;&gt;
    /*
      Promiseå¸¸ç”¨API-å¯¹è±¡æ–¹æ³•
    */
    // console.dir(Promise)
    function queryData(url) {
      return new Promise(function(resolve, reject){
        var xhr = new XMLHttpRequest();
        xhr.onreadystatechange = function(){
          if(xhr.readyState != 4) return;
          if(xhr.readyState == 4 &amp;&amp; xhr.status == 200) {
            // å¤„ç†æ­£å¸¸çš„æƒ…å†µ
            resolve(xhr.responseText);
          }else{
            // å¤„ç†å¼‚å¸¸æƒ…å†µ
            reject('æœåŠ¡å™¨é”™è¯¯');
          }
        };
        xhr.open('get', url);
        xhr.send(null);
      });
    }

    var p1 = queryData('http://localhost:3000/a1');
    var p2 = queryData('http://localhost:3000/a2');
    var p3 = queryData('http://localhost:3000/a3');
     Promise.all([p1,p2,p3]).then(function(result){
       //   all ä¸­çš„å‚æ•°  [p1,p2,p3]   å’Œ è¿”å›çš„ç»“æœä¸€ ä¸€å¯¹åº”[&quot;HELLO TOM&quot;, &quot;HELLO JERRY&quot;, &quot;HELLO SPIKE&quot;]
       console.log(result) //[&quot;HELLO TOM&quot;, &quot;HELLO JERRY&quot;, &quot;HELLO SPIKE&quot;]
     })
    Promise.race([p1,p2,p3]).then(function(result){
      // ç”±äºp1æ‰§è¡Œè¾ƒå¿«ï¼ŒPromiseçš„then()å°†è·å¾—ç»“æœ'P1'ã€‚p2,p3ä»åœ¨ç»§ç»­æ‰§è¡Œï¼Œä½†æ‰§è¡Œç»“æœå°†è¢«ä¸¢å¼ƒã€‚
      console.log(result) // &quot;HELLO TOM&quot;
    })
  &lt;/script&gt;
</code></pre>
<h3 id="fetch">fetch</h3>
<ul>
<li>Fetch APIæ˜¯æ–°çš„ajaxè§£å†³æ–¹æ¡ˆ Fetchä¼šè¿”å›Promise</li>
<li><strong>fetchä¸æ˜¯ajaxçš„è¿›ä¸€æ­¥å°è£…ï¼Œè€Œæ˜¯åŸç”Ÿjsï¼Œæ²¡æœ‰ä½¿ç”¨XMLHttpRequestå¯¹è±¡</strong>ã€‚</li>
<li>fetch(url, options).then(ï¼‰</li>
</ul>
<pre><code class="language-html">  &lt;script type=&quot;text/javascript&quot;&gt;
    /*
      Fetch API åŸºæœ¬ç”¨æ³•
      	fetch(url).then()
     	ç¬¬ä¸€ä¸ªå‚æ•°è¯·æ±‚çš„è·¯å¾„   Fetchä¼šè¿”å›Promise   æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨then æ‹¿åˆ°è¯·æ±‚æˆåŠŸçš„ç»“æœ 
    */
    fetch('http://localhost:3000/fdata').then(function(data){
      // text()æ–¹æ³•å±äºfetchAPIçš„ä¸€éƒ¨åˆ†ï¼Œå®ƒè¿”å›ä¸€ä¸ªPromiseå®ä¾‹å¯¹è±¡ï¼Œç”¨äºè·å–åå°è¿”å›çš„æ•°æ®
      return data.text();
    }).then(function(data){
      //   åœ¨è¿™ä¸ªthené‡Œé¢æˆ‘ä»¬èƒ½æ‹¿åˆ°æœ€ç»ˆçš„æ•°æ®  
      console.log(data);
    })
  &lt;/script&gt;
</code></pre>
<h4 id="fetch-api-ä¸­çš„-http-è¯·æ±‚">fetch API  ä¸­çš„ HTTP  è¯·æ±‚</h4>
<ul>
<li>fetch(url, options).then(ï¼‰</li>
<li>HTTPåè®®ï¼Œå®ƒç»™æˆ‘ä»¬æä¾›äº†å¾ˆå¤šçš„æ–¹æ³•ï¼Œå¦‚POSTï¼ŒGETï¼ŒDELETEï¼ŒUPDATEï¼ŒPATCHå’ŒPUT
<ul>
<li>é»˜è®¤çš„æ˜¯ GET è¯·æ±‚</li>
<li>éœ€è¦åœ¨ options å¯¹è±¡ä¸­ æŒ‡å®šå¯¹åº”çš„ method       method:è¯·æ±‚ä½¿ç”¨çš„æ–¹æ³•</li>
<li>post å’Œ æ™®é€š è¯·æ±‚çš„æ—¶å€™ éœ€è¦åœ¨options ä¸­ è®¾ç½®  è¯·æ±‚å¤´ headers   å’Œ  body</li>
</ul>
</li>
</ul>
<pre><code class="language-html">   &lt;script type=&quot;text/javascript&quot;&gt;
        /*
              Fetch API è°ƒç”¨æ¥å£ä¼ é€’å‚æ•°
        */
       #1.1 GETå‚æ•°ä¼ é€’ - ä¼ ç»ŸURL  é€šè¿‡url  ï¼Ÿ çš„å½¢å¼ä¼ å‚ 
        fetch('http://localhost:3000/books?id=123', {
            	# get è¯·æ±‚å¯ä»¥çœç•¥ä¸å†™ é»˜è®¤çš„æ˜¯GET 
                method: 'get'
            })
            .then(function(data) {
            	# å®ƒè¿”å›ä¸€ä¸ªPromiseå®ä¾‹å¯¹è±¡ï¼Œç”¨äºè·å–åå°è¿”å›çš„æ•°æ®
                return data.text();
            }).then(function(data) {
            	# åœ¨è¿™ä¸ªthené‡Œé¢æˆ‘ä»¬èƒ½æ‹¿åˆ°æœ€ç»ˆçš„æ•°æ®  
                console.log(data)
            });

      #1.2  GETå‚æ•°ä¼ é€’  restfulå½¢å¼çš„URL  é€šè¿‡/ çš„å½¢å¼ä¼ é€’å‚æ•°  å³  id = 456 å’Œidåå°çš„é…ç½®æœ‰å…³   
        fetch('http://localhost:3000/books/456', {
            	# get è¯·æ±‚å¯ä»¥çœç•¥ä¸å†™ é»˜è®¤çš„æ˜¯GET 
                method: 'get'
            })
            .then(function(data) {
                return data.text();
            }).then(function(data) {
                console.log(data)
            });

       #2.1  DELETEè¯·æ±‚æ–¹å¼å‚æ•°ä¼ é€’      åˆ é™¤id  æ˜¯  id=789
        fetch('http://localhost:3000/books/789', {
                method: 'delete'
            })
            .then(function(data) {
                return data.text();
            }).then(function(data) {
                console.log(data)
            });

       #3 POSTè¯·æ±‚ä¼ å‚
        fetch('http://localhost:3000/books', {
                method: 'post',
            	# 3.1  ä¼ é€’æ•°æ® 
                body: 'uname=lisi&amp;pwd=123',
            	#  3.2  è®¾ç½®è¯·æ±‚å¤´ 
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded'
                }
            })
            .then(function(data) {
                return data.text();
            }).then(function(data) {
                console.log(data)
            });

       # POSTè¯·æ±‚ä¼ å‚
        fetch('http://localhost:3000/books', {
                method: 'post',
                body: JSON.stringify({
                    uname: 'å¼ ä¸‰',
                    pwd: '456'
                }),
                headers: {
                    'Content-Type': 'application/json'
                }
            })
            .then(function(data) {
                return data.text();
            }).then(function(data) {
                console.log(data)
            });

        # PUTè¯·æ±‚ä¼ å‚     ä¿®æ”¹id æ˜¯ 123 çš„ 
        fetch('http://localhost:3000/books/123', {
                method: 'put',
                body: JSON.stringify({
                    uname: 'å¼ ä¸‰',
                    pwd: '789'
                }),
                headers: {
                    'Content-Type': 'application/json'
                }
            })
            .then(function(data) {
                return data.text();
            }).then(function(data) {
                console.log(data)
            });
    &lt;/script&gt;
</code></pre>
<h4 id="fetchapi-ä¸­-å“åº”æ ¼å¼">fetchAPI ä¸­ å“åº”æ ¼å¼</h4>
<ul>
<li>ç”¨fetchæ¥è·å–æ•°æ®ï¼Œå¦‚æœå“åº”æ­£å¸¸è¿”å›ï¼Œæˆ‘ä»¬é¦–å…ˆçœ‹åˆ°çš„æ˜¯ä¸€ä¸ªresponseå¯¹è±¡ï¼Œå…¶ä¸­åŒ…æ‹¬è¿”å›çš„ä¸€å †åŸå§‹å­—èŠ‚ï¼Œè¿™äº›å­—èŠ‚éœ€è¦åœ¨æ”¶åˆ°åï¼Œéœ€è¦æˆ‘ä»¬é€šè¿‡è°ƒç”¨æ–¹æ³•å°†å…¶è½¬æ¢ä¸ºç›¸åº”æ ¼å¼çš„æ•°æ®ï¼Œæ¯”å¦‚<code>JSON</code>ï¼Œ<code>BLOB</code>æˆ–è€…<code>TEXT</code>ç­‰ç­‰</li>
</ul>
<pre><code class="language-js">
    /*
      Fetchå“åº”ç»“æœçš„æ•°æ®æ ¼å¼
    */
    fetch('http://localhost:3000/json').then(function(data){
      // return data.json();   //  å°†è·å–åˆ°çš„æ•°æ®ä½¿ç”¨ json è½¬æ¢å¯¹è±¡
      return data.text(); //  //  å°†è·å–åˆ°çš„æ•°æ® è½¬æ¢æˆå­—ç¬¦ä¸² 
    }).then(function(data){
      // console.log(data.uname)
      // console.log(typeof data)
      var obj = JSON.parse(data);
      console.log(obj.uname,obj.age,obj.gender)
    })

</code></pre>
<h3 id="axios">axios</h3>
<ul>
<li>åŸºäºpromiseç”¨äºæµè§ˆå™¨å’Œnode.jsçš„httpå®¢æˆ·ç«¯</li>
<li>æ”¯æŒæµè§ˆå™¨å’Œnode.js</li>
<li>æ”¯æŒpromise</li>
<li>èƒ½æ‹¦æˆªè¯·æ±‚å’Œå“åº”</li>
<li>è‡ªåŠ¨è½¬æ¢JSONæ•°æ®</li>
<li>èƒ½è½¬æ¢è¯·æ±‚å’Œå“åº”æ•°æ®</li>
</ul>
<h4 id="axiosåŸºç¡€ç”¨æ³•">axiosåŸºç¡€ç”¨æ³•</h4>
<ul>
<li>getå’Œ deleteè¯·æ±‚ä¼ é€’å‚æ•°
<ul>
<li>é€šè¿‡ä¼ ç»Ÿçš„url  ä»¥ ? çš„å½¢å¼ä¼ é€’å‚æ•°</li>
<li>restful å½¢å¼ä¼ é€’å‚æ•°</li>
<li>é€šè¿‡params  å½¢å¼ä¼ é€’å‚æ•°</li>
</ul>
</li>
<li>post  å’Œ put  è¯·æ±‚ä¼ é€’å‚æ•°
<ul>
<li>é€šè¿‡é€‰é¡¹ä¼ é€’å‚æ•°</li>
<li>é€šè¿‡ URLSearchParams  ä¼ é€’å‚æ•°</li>
</ul>
</li>
</ul>
<pre><code class="language-js">    # 1. å‘é€get è¯·æ±‚ 
	axios.get('http://localhost:3000/adata').then(function(ret){ 
      #  æ‹¿åˆ° ret æ˜¯ä¸€ä¸ªå¯¹è±¡      æ‰€æœ‰çš„å¯¹è±¡éƒ½å­˜åœ¨ ret çš„data å±æ€§é‡Œé¢
      // æ³¨æ„dataå±æ€§æ˜¯å›ºå®šçš„ç”¨æ³•ï¼Œç”¨äºè·å–åå°çš„å®é™…æ•°æ®
      // console.log(ret.data)
      console.log(ret)
    })
	# 2.  get è¯·æ±‚ä¼ é€’å‚æ•°
    # 2.1  é€šè¿‡ä¼ ç»Ÿçš„url  ä»¥ ? çš„å½¢å¼ä¼ é€’å‚æ•°
	axios.get('http://localhost:3000/axios?id=123').then(function(ret){
      console.log(ret.data)
    })
    # 2.2  restful å½¢å¼ä¼ é€’å‚æ•° 
    axios.get('http://localhost:3000/axios/123').then(function(ret){
      console.log(ret.data)
    })
	# 2.3  é€šè¿‡params  å½¢å¼ä¼ é€’å‚æ•° 
    axios.get('http://localhost:3000/axios', {
      params: {
        id: 789
      }
    }).then(function(ret){
      console.log(ret.data)
    })
	#3 axios delete è¯·æ±‚ä¼ å‚     ä¼ å‚çš„å½¢å¼å’Œ get è¯·æ±‚ä¸€æ ·
    axios.delete('http://localhost:3000/axios', {
      params: {
        id: 111
      }
    }).then(function(ret){
      console.log(ret.data)
    })

	# 4  axios çš„ post è¯·æ±‚
    # 4.1  é€šè¿‡é€‰é¡¹ä¼ é€’å‚æ•°
    axios.post('http://localhost:3000/axios', {
      uname: 'lisi',
      pwd: 123
    }).then(function(ret){
      console.log(ret.data)
    })
	# 4.2  é€šè¿‡ URLSearchParams  ä¼ é€’å‚æ•° 
    var params = new URLSearchParams();
    params.append('uname', 'zhangsan');
    params.append('pwd', '111');
    axios.post('http://localhost:3000/axios', params).then(function(ret){
      console.log(ret.data)
    })

 	#5  axios put è¯·æ±‚ä¼ å‚   å’Œ post è¯·æ±‚ä¸€æ · 
    axios.put('http://localhost:3000/axios/123', {
      uname: 'lisi',
      pwd: 123
    }).then(function(ret){
      console.log(ret.data)
    })

</code></pre>
<h4 id="axios-å…¨å±€é…ç½®">axios å…¨å±€é…ç½®</h4>
<pre><code class="language-js">#  é…ç½®å…¬å…±çš„è¯·æ±‚å¤´ 
axios.defaults.baseURL = 'https://api.example.com';
#  é…ç½® è¶…æ—¶æ—¶é—´
axios.defaults.timeout = 2500;
#  é…ç½®å…¬å…±çš„è¯·æ±‚å¤´
axios.defaults.headers.common['Authorization'] = AUTH_TOKEN;
# é…ç½®å…¬å…±çš„ post çš„ Content-Type
axios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';


</code></pre>
<h4 id="axios-æ‹¦æˆªå™¨">axios æ‹¦æˆªå™¨</h4>
<ul>
<li>è¯·æ±‚æ‹¦æˆªå™¨
<ul>
<li>è¯·æ±‚æ‹¦æˆªå™¨çš„ä½œç”¨æ˜¯åœ¨è¯·æ±‚å‘é€å‰è¿›è¡Œä¸€äº›æ“ä½œ
<ul>
<li>ä¾‹å¦‚åœ¨æ¯ä¸ªè¯·æ±‚ä½“é‡ŒåŠ ä¸Štokenï¼Œç»Ÿä¸€åšäº†å¤„ç†å¦‚æœä»¥åè¦æ”¹ä¹Ÿéå¸¸å®¹æ˜“</li>
</ul>
</li>
</ul>
</li>
<li>å“åº”æ‹¦æˆªå™¨
<ul>
<li>å“åº”æ‹¦æˆªå™¨çš„ä½œç”¨æ˜¯åœ¨æ¥æ”¶åˆ°å“åº”åè¿›è¡Œä¸€äº›æ“ä½œ
<ul>
<li>ä¾‹å¦‚åœ¨æœåŠ¡å™¨è¿”å›ç™»å½•çŠ¶æ€å¤±æ•ˆï¼Œéœ€è¦é‡æ–°ç™»å½•çš„æ—¶å€™ï¼Œè·³è½¬åˆ°ç™»å½•é¡µ</li>
</ul>
</li>
</ul>
</li>
</ul>
<pre><code class="language-js">	# 1. è¯·æ±‚æ‹¦æˆªå™¨ 
	axios.interceptors.request.use(function(config) {
      console.log(config.url)
      # 1.1  ä»»ä½•è¯·æ±‚éƒ½ä¼šç»è¿‡è¿™ä¸€æ­¥   åœ¨å‘é€è¯·æ±‚ä¹‹å‰åšäº›ä»€ä¹ˆ   
      config.headers.mytoken = 'nihao';
      # 1.2  è¿™é‡Œä¸€å®šè¦return   å¦åˆ™é…ç½®ä¸æˆåŠŸ  
      return config;
    }, function(err){
       #1.3 å¯¹è¯·æ±‚é”™è¯¯åšç‚¹ä»€ä¹ˆ    
      console.log(err)
    })
	#2. å“åº”æ‹¦æˆªå™¨ 
    axios.interceptors.response.use(function(res) {
      #2.1  åœ¨æ¥æ”¶å“åº”åšäº›ä»€ä¹ˆ  
      var data = res.data;
      return data;
    }, function(err){
      #2.2 å¯¹å“åº”é”™è¯¯åšç‚¹ä»€ä¹ˆ  
      console.log(err)
    })
</code></pre>
<h3 id="async-å’Œ-await">async  å’Œ await</h3>
<ul>
<li>asyncä½œä¸ºä¸€ä¸ªå…³é”®å­—æ”¾åˆ°å‡½æ•°å‰é¢
<ul>
<li>ä»»ä½•ä¸€ä¸ª<code>async</code>å‡½æ•°éƒ½ä¼šéšå¼è¿”å›ä¸€ä¸ª<code>promise</code></li>
</ul>
</li>
<li><code>await</code>å…³é”®å­—åªèƒ½åœ¨ä½¿ç”¨<code>async</code>å®šä¹‰çš„å‡½æ•°ä¸­ä½¿ç”¨
<ul>
<li>â€‹    awaitåé¢å¯ä»¥ç›´æ¥è·Ÿä¸€ä¸ª Promiseå®ä¾‹å¯¹è±¡</li>
<li>â€‹     awaitå‡½æ•°ä¸èƒ½å•ç‹¬ä½¿ç”¨</li>
</ul>
</li>
<li><strong>async/await è®©å¼‚æ­¥ä»£ç çœ‹èµ·æ¥ã€è¡¨ç°èµ·æ¥æ›´åƒåŒæ­¥ä»£ç </strong></li>
</ul>
<pre><code class="language-js"> 	# 1.  async åŸºç¡€ç”¨æ³•
    # 1.1 asyncä½œä¸ºä¸€ä¸ªå…³é”®å­—æ”¾åˆ°å‡½æ•°å‰é¢
	async function queryData() {
      # 1.2 awaitå…³é”®å­—åªèƒ½åœ¨ä½¿ç”¨asyncå®šä¹‰çš„å‡½æ•°ä¸­ä½¿ç”¨      awaitåé¢å¯ä»¥ç›´æ¥è·Ÿä¸€ä¸ª Promiseå®ä¾‹å¯¹è±¡
      var ret = await new Promise(function(resolve, reject){
        setTimeout(function(){
          resolve('nihao')
        },1000);
      })
      // console.log(ret.data)
      return ret;
    }
	# 1.3 ä»»ä½•ä¸€ä¸ªasyncå‡½æ•°éƒ½ä¼šéšå¼è¿”å›ä¸€ä¸ªpromise   æˆ‘ä»¬å¯ä»¥ä½¿ç”¨then è¿›è¡Œé“¾å¼ç¼–ç¨‹
    queryData().then(function(data){
      console.log(data)
    })

	#2.  async    å‡½æ•°å¤„ç†å¤šä¸ªå¼‚æ­¥å‡½æ•°
    axios.defaults.baseURL = 'http://localhost:3000';

    async function queryData() {
      # 2.1  æ·»åŠ awaitä¹‹å å½“å‰çš„await è¿”å›ç»“æœä¹‹åæ‰ä¼šæ‰§è¡Œåé¢çš„ä»£ç    
      
      var info = await axios.get('async1');
      #2.2  è®©å¼‚æ­¥ä»£ç çœ‹èµ·æ¥ã€è¡¨ç°èµ·æ¥æ›´åƒåŒæ­¥ä»£ç 
      var ret = await axios.get('async2?info=' + info.data);
      return ret.data;
    }

    queryData().then(function(data){
      console.log(data)
    })
</code></pre>
<h3 id="å›¾ä¹¦åˆ—è¡¨æ¡ˆä¾‹">å›¾ä¹¦åˆ—è¡¨æ¡ˆä¾‹</h3>
<h4 id="1-åŸºäºæ¥å£æ¡ˆä¾‹-è·å–å›¾ä¹¦åˆ—è¡¨">1. åŸºäºæ¥å£æ¡ˆä¾‹-è·å–å›¾ä¹¦åˆ—è¡¨</h4>
<ul>
<li>å¯¼å…¥axios   ç”¨æ¥å‘é€ajax</li>
<li>æŠŠè·å–åˆ°çš„æ•°æ®æ¸²æŸ“åˆ°é¡µé¢ä¸Š</li>
</ul>
<pre><code class="language-html">  &lt;div id=&quot;app&quot;&gt;
        &lt;div class=&quot;grid&quot;&gt;
            &lt;table&gt;
                &lt;thead&gt;
                    &lt;tr&gt;
                        &lt;th&gt;ç¼–å·&lt;/th&gt;
                        &lt;th&gt;åç§°&lt;/th&gt;
                        &lt;th&gt;æ—¶é—´&lt;/th&gt;
                        &lt;th&gt;æ“ä½œ&lt;/th&gt;
                    &lt;/tr&gt;
                &lt;/thead&gt;
                &lt;tbody&gt;
                    &lt;!-- 5.  æŠŠbooks  ä¸­çš„æ•°æ®æ¸²æŸ“åˆ°é¡µé¢ä¸Š   --&gt;
                    &lt;tr :key='item.id' v-for='item in books'&gt;
                        &lt;td&gt;{{item.id}}&lt;/td&gt;
                        &lt;td&gt;{{item.name}}&lt;/td&gt;
                        &lt;td&gt;{{item.date }}&lt;/td&gt;
                        &lt;td&gt;
                            &lt;a href=&quot;&quot;&gt;ä¿®æ”¹&lt;/a&gt;
                            &lt;span&gt;|&lt;/span&gt;
                            &lt;a href=&quot;&quot;&gt;åˆ é™¤&lt;/a&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                &lt;/tbody&gt;
            &lt;/table&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;script type=&quot;text/javascript&quot; src=&quot;js/vue.js&quot;&gt;&lt;/script&gt;
	1.  å¯¼å…¥axios   
    &lt;script type=&quot;text/javascript&quot; src=&quot;js/axios.js&quot;&gt;&lt;/script&gt;
    &lt;script type=&quot;text/javascript&quot;&gt;
        /*
             å›¾ä¹¦ç®¡ç†-æ·»åŠ å›¾ä¹¦
         */
        # 2   é…ç½®å…¬å…±çš„urlåœ°å€  ç®€åŒ–åé¢çš„è°ƒç”¨æ–¹å¼
        axios.defaults.baseURL = 'http://localhost:3000/';
        axios.interceptors.response.use(function(res) {
            return res.data;
        }, function(error) {
            console.log(error)
        });

        var vm = new Vue({
            el: '#app',
            data: {
                flag: false,
                submitFlag: false,
                id: '',
                name: '',
                books: []
            },
            methods: {
                # 3 å®šä¹‰ä¸€ä¸ªæ–¹æ³• ç”¨æ¥å‘é€ ajax 
                # 3.1  ä½¿ç”¨ async  æ¥ è®©å¼‚æ­¥çš„ä»£ç   ä»¥åŒæ­¥çš„å½¢å¼ä¹¦å†™ 
                queryData: async function() {
                    // è°ƒç”¨åå°æ¥å£è·å–å›¾ä¹¦åˆ—è¡¨æ•°æ®
                    // var ret = await axios.get('books');
                    // this.books = ret.data;
					# 3.2  å‘é€ajaxè¯·æ±‚  æŠŠæ‹¿åˆ°çš„æ•°æ®æ”¾åœ¨books é‡Œé¢   
                    this.books = await axios.get('books');
                }
            },

            mounted: function() {
				#  4 mounted  é‡Œé¢ DOMå·²ç»åŠ è½½å®Œæ¯•  åœ¨è¿™é‡Œè°ƒç”¨å‡½æ•°  
                this.queryData();
            }
        });
    &lt;/script&gt;
</code></pre>
<h4 id="2-æ·»åŠ å›¾ä¹¦">2   æ·»åŠ å›¾ä¹¦</h4>
<ul>
<li>è·å–ç”¨æˆ·è¾“å…¥çš„æ•°æ®   å‘é€åˆ°åå°</li>
<li>æ¸²æŸ“æœ€æ–°çš„æ•°æ®åˆ°é¡µé¢ä¸Š</li>
</ul>
<pre><code class="language-js"> methods: {
    handle: async function(){
          if(this.flag) {
            // ç¼–è¾‘å›¾ä¹¦
            // å°±æ˜¯æ ¹æ®å½“å‰çš„IDå»æ›´æ–°æ•°ç»„ä¸­å¯¹åº”çš„æ•°æ®
            this.books.some((item) =&gt; {
              if(item.id == this.id) {
                item.name = this.name;
                // å®Œæˆæ›´æ–°æ“ä½œä¹‹åï¼Œéœ€è¦ç»ˆæ­¢å¾ªç¯
                return true;
              }
            });
            this.flag = false;
          }else{
            # 1.1  åœ¨å‰é¢å°è£…å¥½çš„ handle æ–¹æ³•ä¸­  å‘é€ajaxè¯·æ±‚  
            # 1.2  ä½¿ç”¨async  å’Œ await ç®€åŒ–æ“ä½œ éœ€è¦åœ¨ function å‰é¢æ·»åŠ  async   
            var ret = await axios.post('books', {
              name: this.name
            })
            # 1.3  æ ¹æ®åå°è¿”å›çš„çŠ¶æ€ç åˆ¤æ–­æ˜¯å¦åŠ è½½æ•°æ® 
            if(ret.status == 200) {
             # 1.4  è°ƒç”¨ queryData è¿™ä¸ªæ–¹æ³•  æ¸²æŸ“æœ€æ–°çš„æ•°æ® 
              this.queryData();
            }
          }
          // æ¸…ç©ºè¡¨å•
          this.id = '';
          this.name = '';
        },        
 }         
</code></pre>
<h4 id="3-éªŒè¯å›¾ä¹¦åç§°æ˜¯å¦å­˜åœ¨">3  éªŒè¯å›¾ä¹¦åç§°æ˜¯å¦å­˜åœ¨</h4>
<ul>
<li>æ·»åŠ å›¾ä¹¦ä¹‹å‰å‘é€è¯·æ±‚éªŒè¯å›¾ç¤ºæ˜¯å¦å·²ç»å­˜åœ¨</li>
<li>å¦‚æœä¸å­˜åœ¨ å¾€åå°é‡Œé¢æ·»åŠ å›¾ä¹¦åç§°
<ul>
<li>å›¾ä¹¦å­˜åœ¨ä¸å¦åªéœ€è¦ä¿®æ”¹submitFlagçš„å€¼å³å¯</li>
</ul>
</li>
</ul>
<pre><code class="language-js"> watch: {
        name: async function(val) {
          // éªŒè¯å›¾ä¹¦åç§°æ˜¯å¦å·²ç»å­˜åœ¨
          // var flag = this.books.some(function(item){
          //   return item.name == val;
          // });
          var ret = await axios.get('/books/book/' + this.name);
          if(ret.status == 1) {
            // å›¾ä¹¦åç§°å­˜åœ¨
            this.submitFlag = true;
          }else{
            // å›¾ä¹¦åç§°ä¸å­˜åœ¨
            this.submitFlag = false;
          }
        }
},
</code></pre>
<h4 id="4-ç¼–è¾‘å›¾ä¹¦">4.  ç¼–è¾‘å›¾ä¹¦</h4>
<ul>
<li>æ ¹æ®å½“å‰ä¹¦çš„id æŸ¥è¯¢éœ€è¦ç¼–è¾‘çš„ä¹¦ç±</li>
<li>éœ€è¦æ ¹æ®çŠ¶æ€ä½åˆ¤æ–­æ˜¯æ·»åŠ è¿˜æ˜¯ç¼–è¾‘</li>
</ul>
<pre><code class="language-js"> methods: {
        handle: async function(){
          if(this.flag) {
            #4.3 ç¼–è¾‘å›¾ä¹¦   æŠŠç”¨æˆ·è¾“å…¥çš„ä¿¡æ¯æäº¤åˆ°åå°
            var ret = await axios.put('books/' + this.id, {
              name: this.name
            });
            if(ret.status == 200){
              #4.4  å®Œæˆæ·»åŠ å é‡æ–°åŠ è½½åˆ—è¡¨æ•°æ®
              this.queryData();
            }
            this.flag = false;
          }else{
            // æ·»åŠ å›¾ä¹¦
            var ret = await axios.post('books', {
              name: this.name
            })
            if(ret.status == 200) {
              // é‡æ–°åŠ è½½åˆ—è¡¨æ•°æ®
              this.queryData();
            }
          }
          // æ¸…ç©ºè¡¨å•
          this.id = '';
          this.name = '';
        },
        toEdit: async function(id){
          #4.1  flagçŠ¶æ€ä½ç”¨äºåŒºåˆ†ç¼–è¾‘å’Œæ·»åŠ æ“ä½œ
          this.flag = true;
          #4.2  æ ¹æ®idæŸ¥è¯¢å‡ºå¯¹åº”çš„å›¾ä¹¦ä¿¡æ¯  é¡µé¢ä¸­å¯ä»¥åŠ è½½å‡ºæ¥æœ€æ–°çš„ä¿¡æ¯
          # è°ƒç”¨æ¥å£å‘é€ajax è¯·æ±‚  
          var ret = await axios.get('books/' + id);
          this.id = ret.id;
          this.name = ret.name;
        },
</code></pre>
<h4 id="5-åˆ é™¤å›¾ä¹¦">5 åˆ é™¤å›¾ä¹¦</h4>
<ul>
<li>æŠŠéœ€è¦åˆ é™¤çš„idä¹¦ç± é€šè¿‡å‚æ•°çš„å½¢å¼ä¼ é€’åˆ°åå°</li>
</ul>
<pre><code class="language-js">   deleteBook: async function(id){
          // åˆ é™¤å›¾ä¹¦
          var ret = await axios.delete('books/' + id);
          if(ret.status == 200) {
            // é‡æ–°åŠ è½½åˆ—è¡¨æ•°æ®
            this.queryData();
          }
   }
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hello Gridea]]></title>
        <id>https://lainbo.github.io//post/hello-gridea</id>
        <link href="https://lainbo.github.io//post/hello-gridea">
        </link>
        <updated>2018-12-11T16:00:00.000Z</updated>
        <summary type="html"><![CDATA[<p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>
]]></summary>
        <content type="html"><![CDATA[<p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>
<!-- more -->
<p><a href="https://github.com/getgridea/gridea">Github</a><br>
<a href="https://gridea.dev/">Gridea ä¸»é¡µ</a><br>
<a href="http://fehey.com/">ç¤ºä¾‹ç½‘ç«™</a></p>
<h2 id="ç‰¹æ€§">ç‰¹æ€§ğŸ‘‡</h2>
<p>ğŸ“  ä½ å¯ä»¥ä½¿ç”¨æœ€é…·çš„ <strong>Markdown</strong> è¯­æ³•ï¼Œè¿›è¡Œå¿«é€Ÿåˆ›ä½œ</p>
<p>ğŸŒ‰  ä½ 11111å¯ä»¥ç»™æ–‡ç« é…ä¸Šç²¾ç¾çš„å°é¢å›¾å’Œåœ¨æ–‡ç« ä»»æ„ä½ç½®æ’å…¥å›¾ç‰‡</p>
<p>ğŸ·ï¸  ä½ å¯ä»¥å¯¹æ–‡ç« è¿›è¡Œæ ‡ç­¾åˆ†ç»„</p>
<p>ğŸ“‹  ä½ å¯ä»¥è‡ªå®šä¹‰èœå•ï¼Œç”šè‡³å¯ä»¥åˆ›å»ºå¤–éƒ¨é“¾æ¥èœå•</p>
<p>ğŸ’»  ä½ å¯ä»¥åœ¨ <strong>Windows</strong>ï¼Œ<strong>MacOS</strong> æˆ– <strong>Linux</strong> è®¾å¤‡ä¸Šä½¿ç”¨æ­¤å®¢æˆ·ç«¯</p>
<p>ğŸŒ  ä½ å¯ä»¥ä½¿ç”¨ <strong>ğ–¦ğ—‚ğ—ğ—ğ—ğ–» ğ–¯ğ–ºğ—€ğ–¾ğ—Œ</strong> æˆ– <strong>Coding Pages</strong> å‘ä¸–ç•Œå±•ç¤ºï¼Œæœªæ¥å°†æ”¯æŒæ›´å¤šå¹³å°</p>
<p>ğŸ’¬  ä½ å¯ä»¥è¿›è¡Œç®€å•çš„é…ç½®ï¼Œæ¥å…¥ <a href="https://github.com/gitalk/gitalk">Gitalk</a> æˆ– <a href="https://github.com/SukkaW/DisqusJS">DisqusJS</a> è¯„è®ºç³»ç»Ÿ</p>
<p>ğŸ‡¬ğŸ‡§  ä½ å¯ä»¥ä½¿ç”¨<strong>ä¸­æ–‡ç®€ä½“</strong>æˆ–<strong>è‹±è¯­</strong></p>
<p>ğŸŒ  ä½ å¯ä»¥ä»»æ„ä½¿ç”¨åº”ç”¨å†…é»˜è®¤ä¸»é¢˜æˆ–ä»»æ„ç¬¬ä¸‰æ–¹ä¸»é¢˜ï¼Œå¼ºå¤§çš„ä¸»é¢˜è‡ªå®šä¹‰èƒ½åŠ›</p>
<p>ğŸ–¥  ä½ å¯ä»¥è‡ªå®šä¹‰æºæ–‡ä»¶å¤¹ï¼Œåˆ©ç”¨ OneDriveã€ç™¾åº¦ç½‘ç›˜ã€iCloudã€Dropbox ç­‰è¿›è¡Œå¤šè®¾å¤‡åŒæ­¥</p>
<p>ğŸŒ± å½“ç„¶ <strong>Gridea</strong> è¿˜å¾ˆå¹´è½»ï¼Œæœ‰å¾ˆå¤šä¸è¶³ï¼Œä½†è¯·ç›¸ä¿¡ï¼Œå®ƒä¼šä¸åœå‘å‰ ğŸƒ</p>
<p>æœªæ¥ï¼Œå®ƒä¸€å®šä¼šæˆä¸ºä½ ç¦»ä¸å¼€çš„ä¼™ä¼´</p>
<p>å°½æƒ…å‘æŒ¥ä½ çš„æ‰åå§ï¼</p>
<p>ğŸ˜˜ Enjoy~</p>
]]></content>
    </entry>
</feed>